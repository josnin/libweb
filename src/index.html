<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPA no js framework</title>
    <link rel="stylesheet" href="/static/css/index.css">
</head>
<body>
    <nav class="nav">
        <a href="/" data-link>Home</a>
        <a href="/cart" data-link>Cart</a>
        <a href="/checkout" data-link>Checkout</a>
    </nav>
    <!--<div id="app"></div>-->
    <my-counter count="10"></my-counter>
    <!--<script type="module" src="/static/js/index.js"></script>-->
    <script>

        class MyCounter extends HTMLElement {
            constructor() {
                super();
                this.shadow = this.attachShadow({mode: 'open'});
            };
    
            get count() {
                return this.getAttribute('count');
            }
    
            set count(val) {
                this.setAttribute('count', val);
            }
    
            static get observedAttributes() {
                return ['count'];
            }
    
            
            attributeChangedCallback(prop, oldVal, newVal) {
                if (prop === 'count') {
                    this.render();
                    let btn = this.shadow.querySelector("#btn");
                    btn.addEventListener('click', this.inc.bind(this))
                }
            }
    
            inc() {
                this.count++;
            }
        
    
            connectedCallback() {
                this.render();
                let btn = this.shadow.querySelector("#btn");
                btn.addEventListener('click', this.inc.bind(this))
            }
    
            render() {
                this.shadow.innerHTML = `
                    <h1>Counter</h1>
                    ${this.count}
                    <button id="btn">Increment</button>    
                `
            }
    
        }
    
        customElements.define('my-counter', MyCounter);
    
        </script>
</body>
</html>